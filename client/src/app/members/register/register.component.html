<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
  <h1 class="h2">新用户注册</h1>
  <div class="btn-toolbar mb-2 mb-md-0"
       *ngIf="(accountService.currentUser$ | async)===null">
    <button type="button"
            class="btn btn-sm btn-outline-secondary"
            routerLink="/">
      <i class="bi bi-plus"></i>
      <span class="ms-1"
            (click)="cancel()">用户登录</span>
    </button>
  </div>
</div>

<div class=" container mb-5">
  <div class=" row justify-content-center align-items-center">
    <form [formGroup]='registerForm'
          (ngSubmit)="registerForm.valid && register()"
          autocomplete="off"
          class="col-sm-6 mt-5  form-group">
      <!-- <div class="form-floating mb-1">
        <input type="text"
               class="form-control ps-3"
               id="usernameInput"
               formControlName='username'
               placeholder="用户名">
        <label for="usernameInput"
               class="ps-2">用户名</label>
        <div *ngIf="registerForm.get('username').hasError('required')"
             class="invalid-feedback">
          请输入用户名</div>
      </div> -->

      <app-text-input [formControl]='$any(registerForm.controls["username"])'
                      [label]='"Username"'></app-text-input>



      <!-- <app-text-input [formControl]='$any(registerForm.controls["knownAs"])'
                      [label]='"昵称 英文名"'></app-text-input> -->

      <div class="form-floating mb-1">
        <input type="text"
               class="form-control ps-3"
               id="knownAsInput"
               formControlName='knownAs'
               placeholder="昵称 英文名"
               value="{{registerForm.value.username | titlecase}}">
        <label for="knownAsInput"
               class="ps-2">
          昵称 英文名
        </label>
      </div>

      <!-- <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("email").errors && registerForm.get("email").touched'
               type="email"
               class="form-control ps-3"
               id="emailInput"
               formControlName='email'
               placeholder="Email">
        <label for="emailInput"
               class="ps-2">Email</label>
        <div *ngIf="registerForm.get('email').hasError('required')"
             class="invalid-feedback">
          请输入您的个人邮箱</div>
        <div *ngIf="registerForm.get('email').hasError('email')"
             class="invalid-feedback">
          邮箱格式不对</div>
      </div> -->
      <app-text-input [formControl]='$any(registerForm.controls["email"])'
                      [type]='"email"'
                      [label]='"email"'></app-text-input>
      <app-text-input [formControl]='$any(registerForm.controls["phoneNumber"])'
                      [label]='"手机号码"'></app-text-input>
      <!-- <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("phoneNumber").errors && registerForm.get("phoneNumber").touched'
               type="text"
               class="form-control ps-3"
               id="phoneNumberInput"
               formControlName='phoneNumber'
               placeholder="Phone Number">
        <label for="phoneNumberInput"
               class="ps-2">手机号码</label>
        <div *ngIf="registerForm.get('phoneNumber').hasError('required')"
             class="invalid-feedback">
          请输入11位手机号 13800000000 </div>
        <div *ngIf="registerForm.get('phoneNumber').hasError('pattern')"
             class="invalid-feedback">
          手机号位数不对，11位手机号 13800000000</div>
      </div> -->

      <app-text-input [formControl]='$any(registerForm.controls["name"])'
                      [label]='"姓名"'></app-text-input>

      <!-- <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("name").errors && registerForm.get("name").touched'
               type="text"
               class="form-control ps-3"
               id="nameInput"
               formControlName='name'
               placeholder="姓名">
        <label for="nameInput"
               class="ps-2">姓名</label>
        <div *ngIf="registerForm.get('name').hasError('required')"
             class="invalid-feedback">
          请输入姓名</div>
      </div> -->
      <app-text-input [formControl]='$any(registerForm.controls["nationalId"])'
                      [label]='"身份证号"'></app-text-input>

      <!-- <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("nationalId").errors && registerForm.get("nationalId").touched'
               type="text"
               class="form-control ps-3"
               id="nationalIdInput"
               formControlName='nationalId'
               placeholder="身份证号">
        <label for="nationalIdInput"
               class="ps-2">身份证号</label>
        <div *ngIf="registerForm.get('nationalId').hasError('required')"
             class="invalid-feedback">
          请输入身份证号</div>
        <div *ngIf="registerForm.get('nationalId').hasError('pattern')"
             class="invalid-feedback">
          身份证号输入错误</div>
      </div> -->

      <!-- <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("dateOfBirth").errors && registerForm.get("dateOfBirth").touched || registerForm.get("dateOfBirth").untouched'
               type="date"
               class="form-control ps-3"
               id="dateOfBirthInput"
               formControlName='dateOfBirth'
               bsDatepicker
               [bsConfig]="{ isAnimated: true }"
               placeholder="生日">
        <label for="dateOfBirthInput"
               class="ps-2">生日</label>
        <div *ngIf="registerForm.get('dateOfBirth').hasError('required')"
             class="invalid-feedback ps-3">
          请输入生日</div>
      </div> -->

      <app-date-input [formControl]='$any(registerForm.controls["dateOfBirth"])'
                      [label]='"出生年月"'
                      [maxDate]='maxDate'
                      class="fw-bold text-danger">
      </app-date-input>

      <!-- <app-text-input [formControl]='$any(registerForm.controls["password"])'
                      [type]='"password"'
                      [label]='"密码"'>
      </app-text-input> -->


      <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("password").errors && registerForm.get("password").touched'
               type="password"
               class="form-control ps-3"
               formControlName="password"
               id="floatingPassword"
               placeholder="Password">
        <label for="floatingPassword"
               class="ps-2">
          Password
          <span class="text-danger">*</span>
        </label>
        <div *ngIf="registerForm.get('password').hasError('required')"
             class="invalid-feedback ps-3">
          请输入密码</div>
        <!-- <div *ngIf="registerForm.get('password').hasError('minlength')"
             class="invalid-feedback ps-3">
          密码必须6位以上</div> -->
        <div *ngIf="registerForm.get('password').hasError('pattern')"
             class="invalid-feedback ps-3">
          密码由6位以上组成，必须包含数字、大写字母、小写字母及符号(#?!@$%^&*-)</div>
      </div>


      <app-text-input [formControl]='$any(registerForm.controls["confirmPassword"])'
                      [type]='"password"'
                      [label]='"确认密码"'></app-text-input>
      <!--
      <div class="form-floating mb-1">
        <input [class.is-invalid]='registerForm.get("confirmPassword").errors && registerForm.get("confirmPassword").touched'
               type="password"
               class="form-control ps-3"
               formControlName="confirmPassword"
               id="floatingconfirmPassword"
               placeholder="Confirm Password">
        <label for="floatingconfirmPassword"
               class="ps-2">确认密码 Confirmed Password</label>
        <div *ngIf="registerForm.get('confirmPassword').hasError('required')"
             class="invalid-feedback">
          请输入确认密码</div>
        <div *ngIf="registerForm.get('confirmPassword').hasError('isMatching')"
             class="invalid-feedback">
          确认密码必须和密码相同</div>
      </div> -->

      <div class="form-check form-check-inline  mb-3">
        <div class="fs-6">性别：</div>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input"
               type="radio"
               id="inlineRadio1"
               formControlName='gender'
               value="male">
        <label class="form-check-label"
               for="inlineRadio1">男</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input ms-1"
               type="radio"
               id="inlineRadio2"
               formControlName='gender'
               value="female">
        <label class="form-check-label ms-1"
               for="inlineRadio2">女</label>
      </div>

      <!-- <div class="row"
           *ngIf="validationErrors.length > 0">
        <ul class="text-danger">
          <li *ngFor="let error of validationErrors">
            {{error}}
          </li>
        </ul>
      </div> -->

      <div class="form-check">
        <button [disabled]='!registerForm.valid'
                type="submit"
                class="btn btn-success col-2 offset-3">注 册</button>
        <button type="button"
                class="btn btn-default col-2 ms-3"
                (click)="cancel()">取 消</button>
      </div>
      <!-- <p class="m-3">Form Value:{{registerForm.value | json}}</p>
      <p class="m-3">Form status:{{registerForm.status | json}}</p> -->

    </form>
  </div>
</div>
